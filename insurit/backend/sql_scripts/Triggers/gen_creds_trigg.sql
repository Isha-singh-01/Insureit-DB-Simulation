DELIMITER //
CREATE TRIGGER generate_credentials
AFTER INSERT ON INSURIT.CUSTOMER
FOR EACH ROW
BEGIN
    INSERT INTO SECRETS (Customer_id, USERNAME, SECRET)
    VALUES (NEW.Customer_id, SUBSTRING_INDEX(NEW.NAME, ' ', 1), SHA2(LOWER(NEW.NAME), 256));
END;
//
DELIMITER ;
commit;